﻿@if (Request.Cookies["KullaniciBilgileri"] == null || Request.Cookies["KullaniciBilgileri"]["KullaniciID"] == null)
{
    Response.Redirect("/Anasayfa/Login");
}

@{
    string kullaniciAdi = HttpUtility.UrlDecode(Request.Cookies["KullaniciBilgileri"]["KullaniciAdi"]);
    string adSoyad = HttpUtility.UrlDecode(Request.Cookies["KullaniciBilgileri"]["AdSoyad"]);
    string binaAdi = HttpUtility.UrlDecode(Request.Cookies["KullaniciBilgileri"]["BinaAdi"]);
    string binaAdres = HttpUtility.UrlDecode(Request.Cookies["KullaniciBilgileri"]["BinaAdres"]);
}


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>@ViewBag.Title - Apartman Aidat Yazılımı</title>
    <meta name="description" content="Apartman aidat, ek gelir, gider ve borç takibi yaparak apartman muhasebesini tutun. Denetçi raporları ve kat mülkiyeti kanununa uygun çalışmalarla apartman yönetimini kolaylaştırın. Ücretsiz demo fırsatını kaçırmayın!">
    <meta name="keywords" content="apartman, aidat takibi, ek gelir, gider, borç takibi, apartman muhasebesi, denetçi raporları, kat mülkiyeti kanunu, ücretsiz demo">

    <!-- Favicons -->
    <link href="/Content/Admin/assets/img/favicon.png" rel="icon">
    <link href="/Content/Admin/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/Content/Admin/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/Content/Admin/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/Content/Admin/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="/Content/Admin/assets/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="/Content/Admin/assets/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="/Content/Admin/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="/Content/Admin/assets/vendor/simple-datatables/style.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="/Content/Admin/assets/css/style.css" rel="stylesheet">
    <style>
        .duyuru-container {
            width: 100%;
            overflow: hidden; /* Taşmayı gizle */
            padding: 10px;
            background-color: red; /* Arka planı kırmızı yap */
            position: relative;
        }

        .duyuru-item {
            display: inline-block;
            margin-right: 50px; /* Duyurular arasında boşluk */
            white-space: nowrap;
            color: white; /* Yazıyı beyaz yap */
        }
    </style>

    <!-- Select2 CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet">




</head>

<body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function preventDotAndComma(event) {
            let key = event.key; // event.key kullanarak tuş değerini alıyoruz
            let input = event.target;
            let currentValue = input.value;

            // Harfleri ve diğer geçersiz karakterleri engelle (Türkçe karakterler dahil)
            if (/^[a-zA-ZğüşıöçĞÜŞİÖÇ]$/.test(key)) {
                event.preventDefault();
                return;
            }

            // NumLock rakamları ve normal rakamlar
            if (/^[0-9]$/.test(key)) {
                return; // Rakam girişine izin ver
            }

            // Nokta ve virgül kontrolü
            if ((key === '.' || key === ',')) {
                if (currentValue.includes(',')) {
                    event.preventDefault(); // Zaten virgül varsa tekrar virgüle izin verme
                    return;
                }
                event.preventDefault(); // Noktayı virgüle çevirme işlemi
                let cursorPosition = input.selectionStart;
                let newValue = currentValue.slice(0, cursorPosition) + ',' + currentValue.slice(cursorPosition);
                input.value = newValue;
                input.setSelectionRange(cursorPosition + 1, cursorPosition + 1);
                return;
            }

            // Silme (Backspace) ve sil (Delete) tuşlarına izin ver
            if (key === 'Backspace' || key === 'Delete') {
                return; // Bu tuşlar serbest bırakılır
            }

            // Diğer geçersiz tuşlar
            event.preventDefault();
        }
    </script>

    <!-- ======= Header ======= -->
    <header id="header" class="header fixed-top d-flex align-items-center">

        <div class="d-flex align-items-center justify-content-between">
            <a href="/AnaSayfa" class="logo d-flex align-items-center">
                <img src="~/Content/Admin/assets/img/logo.png" alt="">
                <span class="d-none d-lg-block">Aidat Yazılımı</span>
            </a>
            <i class="bi bi-list toggle-sidebar-btn"></i>
        </div><!-- End Logo -->

        <div class="search-bar">
            <form class="search-form d-flex align-items-center" onsubmit="return false;">
                <input type="text" id="menuSearch" placeholder="Ara..." title="Menüde ara">
                <button type="submit" title="Search"><i class="bi bi-search"></i></button>
            </form>
        </div>


        <script>
            // Türkçe karakterleri normalize eden fonksiyon
            function normalizeText(text) {
                return text
                    .toLowerCase()
                    .replace(/ç/g, 'c')
                    .replace(/ğ/g, 'g')
                    .replace(/ı/g, 'i')
                    .replace(/ö/g, 'o')
                    .replace(/ş/g, 's')
                    .replace(/ü/g, 'u');
            }

            document.getElementById('menuSearch').addEventListener('input', function () {
                var searchValue = normalizeText(this.value.trim());
                var items = document.querySelectorAll('.nav-item');

                items.forEach(function (li) {
                    var idValue = normalizeText(li.id || '');
                    if (searchValue === '' || idValue.includes(searchValue)) {
                        li.style.display = '';
                    } else {
                        li.style.display = 'none';
                    }
                });
            });
        </script>


        <nav class="header-nav ms-auto">
            <ul class="d-flex align-items-center">




                <li class="nav-item d-block d-lg-none">
                    <a class="nav-link nav-icon search-bar-toggle " href="#">
                        <i class="bi bi-search"></i>
                    </a>
                </li><!-- End Search Icon-->


                <li class="nav-item dropdown pe-3">

                    <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
                        <img src="/Content/Admin/assets/img/profile-img.jpg" alt="Profile" class="rounded-circle">
                        <span class="d-none d-md-block dropdown-toggle ps-2">@kullaniciAdi</span>
                    </a><!-- End Profile Iamge Icon -->

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
                        <li class="dropdown-header">
                            <h6>@adSoyad</h6>
                            <span>@binaAdi</span>
                        </li>

                        <li>
                            <hr class="dropdown-divider">
                        </li>

                        <li>
                            <a class="dropdown-item d-flex align-items-center" href="/AnaSayfa/Password">
                                <i class="bi bi-gear"></i>
                                <span>Şifre Değiştir</span>
                            </a>
                        </li>

                        <li>
                            <hr class="dropdown-divider">
                        </li>

                        <li>
                            <a class="dropdown-item d-flex align-items-center" href="/AnaSayfa/Logout">
                                <i class="bi bi-box-arrow-right"></i>
                                <span>Çıkış Yap</span>
                            </a>
                        </li>

                    </ul><!-- End Profile Dropdown Items -->
                </li><!-- End Profile Nav -->

            </ul>
        </nav><!-- End Icons Navigation -->

    </header><!-- End Header -->
    <!-- ======= Sidebar ======= -->
    <aside id="sidebar" class="sidebar">

        @{
            var aktif = Session["Aktif"] != null ? Session["Aktif"].ToString() : "";
        }

        <ul class="sidebar-nav" id="sidebar-nav">

            <li class="nav-item" id="Ana Sayfa">
                <a class="nav-link @(aktif == "Anasayfa" ? "" : "collapsed")" href="/AnaSayfa">
                    <i class="bi bi-grid-fill"></i>
                    <span>Ana Sayfa</span>
                </a>
            </li>

            <li class="nav-item" id="Açılış Bakiyesi">
                <a class="nav-link @(aktif == "AcilisBakiye" ? "" : "collapsed")" href="/AnaSayfa/AcilisBakiye">
                    <i class="bi bi-safe2-fill"></i>
                    <span>Açılış Bakiyesi</span>
                </a>
            </li>

            <li class="nav-item" id="Daire Sakinleri">
                <a class="nav-link @(aktif == "Sakinler" ? "" : "collapsed")" href="/AnaSayfa/Sakinler">
                    <i class="bi bi-people-fill"></i>
                    <span>Daire Sakinleri</span>
                </a>
            </li>

            <li class="nav-item" id="Daire Borçlandır">
                <a class="nav-link @(aktif == "DaireBorclandir" ? "" : "collapsed")" href="/AnaSayfa/DaireBorclandir">
                    <i class="bi bi-cash-stack"></i>
                    <span>Daire Borçlandır</span>
                </a>
            </li>

            <li class="nav-item" id="Peşin Ödemeler">
                <a class="nav-link @(aktif == "PesinOdemeler" ? "" : "collapsed")" href="/AnaSayfa/PesinOdemeler">
                    <i class="bi bi-wallet2"></i>
                    <span>Peşin Ödemeler</span>
                </a>
            </li>

            <li class="nav-item" id="Dönem Ekle">
                <a class="nav-link @(aktif == "DonemEkle" ? "" : "collapsed")" href="/AnaSayfa/DonemEkle">
                    <i class="bi bi-calendar-plus-fill"></i>
                    <span>Dönem Ekle</span>
                </a>
            </li>

            <hr />
            <li class="nav-heading">İşlemler</li>

            <li class="nav-item" id="Toplu Makbuz Oluştur">
                <a class="nav-link @(aktif == "TopluMakbuz" ? "" : "collapsed")" href="/TopluMakbuz">
                    <i class="bi bi-printer-fill"></i>
                    <span>Toplu Makbuz Oluştur</span>
                </a>
            </li>

            <li class="nav-item" id="Makbuz Oluştur">
                <a class="nav-link @(aktif == "Makbuz" ? "" : "collapsed")" href="/Makbuz">
                    <i class="bi bi-receipt"></i>
                    <span>Makbuz Oluştur</span>
                </a>
            </li>

            <li class="nav-item" id="Giderler">
                <a class="nav-link @(aktif == "Giderler" ? "" : "collapsed")" href="/AnaSayfa/Giderler">
                    <i class="bi bi-dash-circle-fill"></i>
                    <span>Giderler</span>
                </a>
            </li>

            <li class="nav-item" id="Tahsilatlar">
                <a class="nav-link @(aktif == "Tahsilat" ? "" : "collapsed")" href="/AnaSayfa/Tahsilat">
                    <i class="bi bi-plus-circle-fill"></i>
                    <span>Tahsilatlar</span>
                </a>
            </li>

            <hr />
            <li class="nav-heading">DİĞER</li>

            <li class="nav-item" id="Eklenen Aidatlar">
                <a class="nav-link @(aktif == "EklenenAidatlar" ? "" : "collapsed")" href="/AnaSayfa/EklenenAidatlar">
                    <i class="bi bi-building-check"></i>
                    <span>Eklenen Aidatlar</span>
                </a>
            </li>

            <li class="nav-item" id="Eklenen Ekler (Demirbaşlar)">
                <a class="nav-link @(aktif == "EklenenEkler" ? "" : "collapsed")" href="/AnaSayfa/EklenenEkler">
                    <i class="bi bi-layers-fill"></i>
                    <span>Eklenen Ekler (Demirbaşlar)</span>
                </a>
            </li>

            <li class="nav-item" id="Makbuz Ara">
                <a class="nav-link @(aktif == "Ara" ? "" : "collapsed")" href="/Makbuz/Ara">
                    <i class="bi bi-search"></i>
                    <span>Makbuz Ara</span>
                </a>
            </li>

            <li class="nav-item" id="Daire Borç Sorgula">
                <a class="nav-link @(aktif == "DaireSorgu" ? "" : "collapsed")" href="/AnaSayfa/DaireSorgu">
                    <i class="bi bi-zoom-in"></i>
                    <span>Daire Borç Sorgula</span>
                </a>
            </li>

            <li class="nav-item" id="Notlarım">
                <a class="nav-link @(aktif == "Notlar" ? "" : "collapsed")" href="/AnaSayfa/Notlar">
                    <i class="bi bi-journal-bookmark-fill"></i>
                    <span>Notlarım</span>
                </a>
            </li>

            <hr />
            <li class="nav-heading">Raporlar</li>

            <li class="nav-item" id="Borçlu Daireler">
                <a class="nav-link @(aktif == "BorcluDaireler" ? "" : "collapsed")" href="/AnaSayfa/BorcluDaireler">
                    <i class="bi bi-person-exclamation"></i>
                    <span>Borçlu Daireler</span>
                </a>
            </li>

            <li class="nav-item" id="Gelir Gider Raporu">
                <a class="nav-link @(aktif == "GelirGider" ? "" : "collapsed")" href="/Raporlar/GelirGider">
                    <i class="bi bi-pie-chart-fill"></i>
                    <span>Gelir Gider Raporu</span>
                </a>
            </li>

            <li class="nav-item" id="Türe Göre Gelir Gider Raporu">
                <a class="nav-link @(aktif == "TureGoreGelirGider" ? "" : "collapsed")" href="/Raporlar/TureGoreGelirGiderTarihBazli">
                    <i class="bi bi-bar-chart-line-fill"></i>
                    <span>Türe Göre Rapor</span>
                </a>
            </li>

            <li class="nav-item" id="Detaylı Gelir Gider Tablosu">
                <a class="nav-link @(aktif == "DetayliGelirGider" ? "" : "collapsed")" href="/Raporlar/DetayliGelirGider?yil=@DateTime.Now.Year&ay=@DateTime.Now.Month">
                    <i class="bi bi-table"></i>
                    <span>Detaylı Tablo</span>
                </a>
            </li>

            <li class="nav-item" id="Denetçi Raporu">
                <a class="nav-link @(aktif == "DenetciRaporu" ? "" : "collapsed")" href="/Raporlar/DenetciRaporu">
                    <i class="bi bi-clipboard2-check-fill"></i>
                    <span>Denetçi Raporu</span>
                </a>
            </li>

            <li class="nav-item" id="Türe Göre Giderler">
                <a class="nav-link @(aktif == "TureGoreGiderler" ? "" : "collapsed")" href="/Raporlar/TureGoreGiderler">
                    <i class="bi bi-graph-down-arrow"></i>
                    <span>Türe Göre Giderler</span>
                </a>
            </li>

            <li class="nav-item" id="Devir Bakiyeleri">
                <a class="nav-link @(aktif == "DevirBakiyeleri" ? "" : "collapsed")" href="/Raporlar/DevirBakiyeleri">
                    <i class="bi bi-arrow-repeat"></i>
                    <span>Devir Bakiyeleri</span>
                </a>
            </li>

        </ul>


    </aside><!-- End Sidebar-->
    <main id="main" class="main">

        @if (ViewBag.Duyurular != null && ViewBag.Duyurular.Count > 0)
        {
            <div class="duyuru-container">
                <marquee behavior="scroll" direction="left" scrollamount="5" scrolldelay="10" loop="infinite">
                    @if (ViewBag.Duyurular != null)
                    {
                        foreach (var item in ViewBag.Duyurular)
                        {
                            <span class="duyuru-item">
                                <i class="bi bi-megaphone-fill"></i> &nbsp; <b>@item.Baslik</b> | @item.Aciklama &nbsp; <i class="bi bi-megaphone-fill"></i>
                            </span>
                        }
                    }
                </marquee>
            </div>
            <br />
        }

        <p><b>Bina Adı:</b> @binaAdi | <b>Lisans Tarihi:</b> @ViewBag.LisansTarih | <a href="https://www.youtube.com/watch?v=Z5XfSiqd6bA&t=5s" class="btn btn-warning" target="_blank"><i class="bi bi-camera-reels-fill"></i> Kullanım Videosu</a> </p>



        <p style="font-size:20px" class="text-center">
            Lisans süresinin dolmasına <b> @ViewBag.KalanGun</b> gün kaldı
        </p>
        <div class="progress" style="width: 100%; max-width: 100%; height: 40px;">
            @if (ViewBag.KalanGun > 25)
            {

                <div class="progress-bar bg-success" role="progressbar" style="width: @ViewBag.Percent%; font-size: 20px; line-height: 40px;" aria-valuenow="@ViewBag.KalanGun" aria-valuemin="0" aria-valuemax="365">

                </div>
            }
            else
            {

                <div class="progress-bar bg-danger" role="progressbar" style="width: @ViewBag.Percent%; font-size: 20px; line-height: 40px;" aria-valuenow="@ViewBag.KalanGun" aria-valuemin="0" aria-valuemax="365">

                </div>
            }
        </div>
        <hr />

        @RenderBody()
    </main>

    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">
        <div class="copyright">
            &copy; Copyright <strong><span>Buğra Öztürk</span></strong>. All Rights Reserved
        </div>

    </footer><!-- End Footer -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="/Content/Admin/assets/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="/Content/Admin/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/Content/Admin/assets/vendor/chart.js/chart.umd.js"></script>
    <script src="/Content/Admin/assets/vendor/echarts/echarts.min.js"></script>
    <script src="/Content/Admin/assets/vendor/quill/quill.min.js"></script>
    <script src="/Content/Admin/assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="/Content/Admin/assets/vendor/tinymce/tinymce.min.js"></script>
    <script src="/Content/Admin/assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="/Content/Admin/assets/js/main.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script>
        $(document).ready(function () {
            // Tüm select elemanlarına select2 uygula
            $('.filter').select2({
                width: '100%',  // Makes the Select2 dropdown take the full width
                allowClear: true,  // Adds a clear button
                heigth: '90px'
            });
        });
    </script>

</body>

</html>